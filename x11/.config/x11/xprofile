#!/bin/sh
# X session profile

# Polkit agent
/usr/lib/polkit-gnome/polkit-gnome-authentication-agent-1 &

# Autostart programs (only if not already running)
autostart="dunst dwmblocks picom"
for program in $autostart; do
    if command -v "$program" >/dev/null 2>&1; then
        pidof -sx "$program" || "$program" &
    fi
done >/dev/null

# Start wallpaper rotation timer (sets initial wallpaper on activation)
systemctl --user start wallpaper.timer

# Machine-specific overrides (not tracked)
[ -f "${XDG_CONFIG_HOME:-$HOME/.config}/x11/xprofile.local" ] && . "${XDG_CONFIG_HOME:-$HOME/.config}/x11/xprofile.local"
